{% extends "user/base.html" %}

{% block title %}My Orders{% endblock %}

{% block extra_head %}
<style>
    .my-orders-wrapper {
        max-width: 1200px;
        margin: 10px auto 30px auto;
        padding: 0 10px;
        border-radius: 12px;
        padding: 20px;
    }

    .orders-title {
        font-weight: 700;
        margin-bottom: 20px;
    }

    .orders-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        /* 3 cards per row on desktop */
        gap: 20px;
    }


    .order-card {
        max-width: 100%;
        width: 378px;
        background: #ffffff;
        border-radius: 12px;
        padding: 18px 20px;
        border: 1px solid #e6e6e6;
        box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.08);
        transition: 0.25s ease;
    }

    .order-card:hover {
        transform: scale(1.05);
        box-shadow: 0px 7px 18px rgba(0, 0, 0, 0.12);
    }

    .order-card h3 {
        margin-bottom: 10px;
        font-size: 20px;
        font-weight: 600;
        color: #222;
    }

    .order-info p {
        margin: 4px 0;
        padding-left: 9px;
        font-size: 15px;
        color: #444;
    }

    .order-info p strong {
        font-weight: 600;
    }

    .bn {
        display: flex;
        justify-content: center;
        align-items: center;

    }

    .view-btn {
        display: inline-block;
        background: #007bff;
        color: white;
        padding: 8px 14px;
        border-radius: 6px;
        text-decoration: none;
        font-size: 14px;
        margin-top: 10px;
        margin-right: 6px;
        transition: 0.25s ease;
    }

    .view-btn:hover {
        background: #0fb80f;
    }

    .empty-orders {
        text-align: center;
        margin-top: 40px;
    }

    .start-shopping-btn {
        display: inline-block;
        background: #28a745;
        color: white;
        padding: 10px 18px;
        border-radius: 6px;
        text-decoration: none;
        font-weight: 600;
        margin-top: 10px;
    }

    .start-shopping-btn:hover {
        background: #1d7e33;
    }

    /* âœ… Responsive: 2 per row on tablets, 1 per row on small screens */
    @media (max-width: 992px) {
        .orders-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    @media (max-width: 600px) {
        .orders-grid {
            grid-template-columns: 1fr;
        }
    }

    /* ---------- Mobile-only overrides for very small screens ---------- */
    @media (max-width: 394px) {

        /* Make the card flexible only on small phones */
        .order-card {
            width: 100% !important;
            /* allow card to shrink to viewport */
            max-width: 365px;
            /* keep a sensible upper limit */
            margin: 0 auto;
            /* center it */
            box-sizing: border-box;
            /* include padding in width */
        }

        /* Ensure the grid becomes single column on small phones */
        .orders-grid {
            grid-template-columns: 1fr !important;
            gap: 14px;
            padding: 0 12px;
        }

        /* Buttons container: keep them in a single row and prevent wrap */
        .bn {
            display: flex;
            gap: 8px;
            justify-content: space-between;
            flex-wrap: nowrap;
            /* prevent stacking */
            margin-top: 10px;
        }

        /* Buttons: share width, but don't overflow */
        .view-btn {
            flex: 1 1 0;
            /* grow/shrink equally */
            min-width: 0;
            /* prevents overflowing text */
            padding: 9px 8px;
            /* slightly tighter padding */
            font-size: 13px;
            white-space: nowrap;
            /* prevent internal wrapping */
            overflow: hidden;
            text-overflow: ellipsis;
            /* gracefully truncate if needed */
        }

        /* If icons push content, hide icon on extremely small widths */
        @media (max-width: 340px) {
            .view-btn i {
                display: none;
            }
        }
    }
</style>
{% endblock %}


{% block content %}

<div class="my-orders-wrapper">

    <h2 class="orders-title">ðŸ“¦ My Orders</h2>

    {% if orders|length == 0 %}
    <div class="empty-orders">
        <p>You have not placed any orders yet.</p>
        <a href="/user/products" class="start-shopping-btn">
            Start Shopping
        </a>
    </div>
    {% else %}

    <div class="orders-grid">
        {% for order in orders %}
        <div class="order-card">

            <h3>Order #{{ order.order_id }}</h3>

            <div class="order-info">
                <p><strong>Amount:</strong> â‚¹{{ order.amount }}</p>
                <p><strong>Status:</strong> {{ order.payment_status }}</p>
                <p><strong>Date:</strong> {{ order.created_at }}</p>
            </div>
            <div class="bn">

                <a href="/user/order-success/{{ order.order_id }}" class="btn view-btn">
                    View Order Details <i class="fa-solid fa-truck-ramp-box"></i>
                </a>
                <a href="/user/download-invoice/{{ order.order_id }}" class="btn view-btn">
                    Download Invoice <i class="fa-solid fa-download"></i>
                </a>
            </div>

        </div>
        {% endfor %}
    </div>

    {% endif %}

</div>

{% endblock %}